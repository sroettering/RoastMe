@import "nib"
@import "../../config/client.styl"

@keyframes MeteorCandySpin
	0%
		transform: rotate(0deg)
	100%
		transform: rotate(360deg)

#MeteorCandy
	$spacing = ( $row-height - $line-height ) / 2
	$padding = $row-height / 3
	color: $base-text2
	font-size: $font-size
	div, input, button, form
		background: transparent
		padding: 0px
		margin: 0px
		box-sizing: border-box
		font-size: inherit
		border: 0px solid transparent
		vertical-align: baseline
		font: inherit
		font-family: $font-normal-family
		font-weight: $font-normal-weight
		height: auto
		max-height: auto
		width: auto
		max-width: auto
		text-align: left
		display: block
		outline: none
		float: initial
		-ms-text-size-adjust: 100%
		-webkit-text-size-adjust: 100%
		text-transform: none
		white-space: normal
		border-radius: 0px
	strong
		font-family: $font-bold-family
		font-weight: $font-bold-weight
	&.MeteorCandy_base_ui
		font-family: $font
		background: $overlay-background 
		position: fixed
		top: 0
		left: 0
		z-index: 2147483647
		height: 100%
		width: 100%	
		cursor: default
	&.MeteorCandy_impersonate
		position: fixed
		bottom: 0
		z-index: 2147483647
		left: 0
		height: $row-height * 4
		margin: $padding
		border-radius: $padding
		overflow: hidden
		text-align: left
		color: $base-text1
		font-family: $font
		cursor: pointer
		transition: .3s
		background: $base-background1
		.MeteorCandy_row
			font-family: $font-bold-family
			font-weight: $font-bold-weight
			margin-left: 0px
			padding-left: $padding
			padding-right: $padding
			background: $base-background1
			&.MeteorCandy_row_middle
				border-bottom: 1px solid $base-background2
			&.MeteorCandy_row_header
				background: $base-background2
				text-align: center
			&.MeteorCandy_row_action
				background: $view-action
				text-align: center
		&:active
			.MeteorCandy_row
				background: darken($base-background1, 16%)
				&.MeteorCandy_row_header
					background: darken($base-background2, 16%)
				&.MeteorCandy_row_action
					background: darken($view-action, 16%)		
	.MeteorCandy_truncate
		height: $line-height
		overflow: hidden
		padding-right: $spacing
		text-overflow: ellipsis
	#MeteorCandy_ui
		background: $base-background1
		width: $modal-width
		height: $modal-height = 495px
		position: absolute
		top: 50%
		left: 50%
		margin-left: $modal-width * -.5 
		margin-top: $modal-height * -.5
		overflow: hidden 
	#MeteorCandy_header
		background: $base-background2
		height: $row-height
		line-height: $row-height
		color: $base-text2
		strong
			color: $base-text2
			margin: 0 14px
		.MeteorCandy_button
			$half-padding = $padding * .5
			padding: 0 $half-padding
			float: left
			cursor: pointer
			font-family: $font-bold-family
			font-weight: $font-bold-weight
			color: $base-text2
			transition: 100ms
			strong
				color: $base-text2
			&:first-child
				margin-left: 7px
			&:active
				color: $base-text1
			&.MeteorCandy_selected
				color: $base-text1
		.MeteorCandy_loader_container
			height: $row-height
			width: 35px
			line-height: $row-height
			float: right
			text-align: right
			padding-top: 3px
			padding-right: 7px
			margin-right: -7px
			cursor: pointer
			opacity: .6
			.MeteorCandy_loader
				height: 18px
				width: 18px
				box-shadow: inset 0 0 0 2px $base-text1
				border-radius: 50px
				position: relative
				display: inline-block
				.MeteorCandy_loader_circle
					position: absolute
					background: purple
					background: $base-background2
					height: 9px
					width: 9px
					transform: rotate(45deg)
					right: -5px
					top: 9px
				.MeteorCandy_loader_arrow
					position: absolute
					height: 0
					width: 0
					top: 5px
					right: -6px
					border: 5px solid transparent
					border-left: 5px solid $base-text1
					transform: rotate(45deg)
			&.MeteorCandy_loader_active, :active
				animation: 1.2s MeteorCandySpin linear infinite forwards
		.MeteorCandy_close
			font-family: $font-bold-family
			font-weight: $font-bold-weight
			float: right
			padding: 0 $padding
			cursor: pointer
			color: $base-text2
			line-height: $row-height
			height: $row-height
			padding-top: 11px
			opacity: .6
			.MeteorCandy_close_icon
				height: 20px
				width: 20px
				position: relative
				transform: rotate(45deg)
				div
					position: absolute
					top: 50%
					left: 50%
					background: $base-text1
					&:first-child
						height: 2px
						width: 100%
						margin-top: -1px
						margin-left: -10px
					&:last-child
						height: 100%
						width: 2px
						margin-top: -10px
						margin-left: -1px
			&:active
				color: $base-text1
	#MeteorCandy_body
		height: "calc(100% - %s)" % $row-height
		overflow: scroll
		color: $base-text2
	.MeteorCandy_splitView
		width: 100%
		height: 100%
		.MeteorCandy_splitView_left
			width: 40%
			height: 100%
			overflow: scroll
			float: left
			background: $base-background1
			.MeteorCandy_row
				border-bottom: 1px solid $base-background2
		.MeteorCandy_splitView_right
			width: 60%
			height: 100%
			overflow: scroll
			float: left
			color: $view-text2
			background: $view-background1
			strong
				color: $view-text1
			.MeteorCandy_row
				border-bottom: 1px solid $view-background2
			.MeteorCandy_task
				background: $view-action
				margin: $padding
				line-height: $row-height
				padding-left: $padding
				cursor: pointer
				color: $base-text1
				font-family: $font-bold-family
				font-weight: $font-bold-weight
				&:active
					background: darken($view-action, 16%)

	.MeteorCandy_row
		line-height: $line-height
		padding: $spacing 0
		margin-left: $padding
		position: relative
		min-height: $row-height
		&:hover
			transition: 50ms
		::placeholder
			color: $base-text2
			font-family: $font-normal-family
			font-weight: $font-normal-weight
		&.MeteorCandy_row_basic
			border: 0px solid transparent !important
		&.MeteorCandy_clickable
			cursor: pointer
			&:active
				background: $base-background2 
				margin-left: 0px
				padding-left: $padding
				box-shadow: 0 -1px 0 $base-background2 
		&.MeteorCandy_selected, &.MeteorCandy_selected:active
			background: $base-text2
			border-color: $base-text2 !important
			margin-left: 0px
			padding-left: $padding
			box-shadow: 0 -1px 0 $base-text2 
			cursor: default
			z-index: 214748364
			background: $base-action
			border-color: $base-action !important
			box-shadow: 0 -1px 0 $base-action 
			color: $base-text1
		strong
			line-height: 24px
			color: $base-text1
		.MeteorCandy_searchIcon
			$margin = (($row-height - ($spacing * 2)) / 2)- $spacing
			height: $spacing * 2 
			width: $spacing * 2 
			margin-top: $margin	
			float: left
			position: relative
			div:first-child
				height: $spacing + 4px
				width: $spacing + 4px
				border-radius: 100px
				box-shadow: inset 0 0 0 2px $base-text1
			div:last-child
				height: $spacing
				width: 2px
				background: $base-text1
				transform: rotate(-45deg)
				bottom: 0px
				right: 3px
				position: absolute
		input[type="text"]
			height: $row-height
			line-height: $line-height
			width: "calc(100% - %s)" % $line-height
			border-bottom: 1px solid transparent
			margin-top: ($spacing * -1) 
			margin-bottom: $spacing * -1
			color: $base-text1 
			font-family: $font-bold-family
			font-weight: $font-bold-weight
			padding-left: $spacing
		.MeteorCandy_row_detail
			float: right
			padding-right: $padding
			line-height: $line-height
			cursor: text
			max-width: 60%
			overflow: hidden
			height: $line-height
			text-overflow: ellipsis
		.MeteorCandy_row_avatar
			height: $line-height * 2
			width: $line-height * 2
			background: $base-text2
			float: left
			border-radius: 2px
			margin-right: $spacing
			background-size: cover